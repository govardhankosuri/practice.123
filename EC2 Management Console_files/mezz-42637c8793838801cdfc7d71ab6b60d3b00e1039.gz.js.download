if(!window.AWSC){AWSC={}}AWSC.PanoramaTrackerInit=(function(){var a=function(){var U="awsc-panorama";try{window.localStorage.setItem(U,U);window.localStorage.removeItem(U);return true}catch(V){return false}};var B=function(){try{return window.performance.now()!==0}catch(U){return false}};var D="/panoramaroute/allowlist",w="global.prod.pw.analytics.console.aws.a2z.com",d=".prod.pr.analytics.console.aws.a2z.com",z="us-east-1",H=1,R="web",A=/alpha|beta|gamma|integ|preprod|pre-prod/i,u="panorama",c="aws.amazon.com",T="1",p="console.aws.amazon.com",L="0",g=w+D,y=p+D,t="awsc_panorama_lastChecked_",S="awsc_panorama_preference_",M=1000,N=undefined,k=20000,E=undefined,I="",K=1000*60*5,r=undefined,s=a(),j=B(),n=function(){return undefined},G=0,b=0;if(window.AWSC&&window.AWSC.Clog&&window.AWSC.Clog.log){n=window.AWSC.Clog.log}var h=(function q(){var e=window.location.hostname,U;switch(true){case A.test(e):U="NonProd";break;case e.indexOf(c)!==-1:U="Prod";break;default:U="NonProd";break}return U})();if(h==="NonProd"&&window.disablePanorama){return}var m=function(V){try{var U=document.createEvent("CustomEvent");U.initCustomEvent("onPanoramaLoad",true,true,{enabled:V});window.dispatchEvent(U);if(!V){window.panorama=function(){console.warn("Panorama is not enabled; events will not be emitted.");return undefined};window.panorama.enabled=false;window.AWSC.Clog.bufferedQueue=[]}}catch(W){n("dispatchPanoramaLoadError",1)}};var J=function(U){try{return document.head.querySelector("meta[name='"+U+"']").getAttribute("content")}catch(V){return null}};var C=function(aa,W,ab,Z,Y){if(s){try{r=JSON.parse(window.localStorage.getItem(t+aa))}catch(X){r=null}if(r&&Date.now()-r<K){m(false);return}else{if(r&&Date.now()-r>K){window.localStorage.removeItem(t+aa);window.localStorage.removeItem(S+aa)}}}var U="https://"+Y+"?modality="+ab+"&identifier="+W+"&region="+aa;var ac=Boolean(window.location.href.indexOf("panoramaEnabled")!==-1);var ad=new XMLHttpRequest();ad.open("GET",U,true);ad.onreadystatechange=function(){if(ad.readyState===4&&ad.status===200){n("panoALSuccessful",1);var ag;if(j){try{var ae=performance.getEntriesByName(U,"resource")[0];ag=Math.round(ae.responseEnd-ae.startTime)}catch(ai){n({key:"panoALPerfError",value:1});j=0;ag=Date.now()-V}}else{ag=Date.now()-V}n({key:"panoALSuccessLatency",value:ag,detail:JSON.stringify({requestUrl:Y,isPerformanceAvailable:j}),unit:"ms"});var af=JSON.parse(ad.response);if(af.isPanoramaAllowed){n("panoALTrue",1)}if(af.isPanoramaAllowed||ac){var ah={};if(af.trackerConfig){try{ah=JSON.parse(af.trackerConfig)}catch(ai){n({key:"panoALParseError",value:1})}}if(ah.trackerUrl&&(ah.trackerUrlRatio||1)>Math.random()){Z=ah.trackerUrl}if(ah.disablePhantom&&!!window.callPhantom){return}x(ab,aa,window,document,"script",Z,u,null,null,ah)}else{m(false);n("panoALFalse",1)}}else{if(ad.readyState===4&&(ad.status>=400||ad.status===0)){n({key:"panoALFailureLatency",value:Date.now()-V,unit:"ms"});if(G<H){G++;if(G===1){n({key:"anyPanoALFail",value:1,detail:ad.status})}ad.abort();N=aa+"."+y;setTimeout(function(){C(aa,W,ab,i,N)},M)}else{window.AWSC.Clog.bufferedQueue=[];n("panoZeroRetriesLeft",1);if(s){window.localStorage.setItem(t+aa,Date.now())}m(false)}}}if(ad.readyState===4&&(ad.status===200||G>=H)){n({key:"totalPanoALRetries",value:G});if(s){if(N===g){window.localStorage.setItem(S+aa,"0;"+Date.now())}else{if(N===aa+"."+y){window.localStorage.setItem(S+aa,"1;"+Date.now())}}}}};ad.ontimeout=function(){b++;n("panoALTimeoutExceeded",b)};ad.timeout=k;var V=Date.now();ad.send();if(G===0){n("anyPanoALSent",1)}return false};var x=function(Y,e,U,Z,V,ad,ab,X,ac,aa){if(!U[ab]){U.GlobalSnowplowNamespace=U.GlobalSnowplowNamespace||[];U.GlobalSnowplowNamespace.push(ab);U[ab]=function(){(U[ab].q=U[ab].q||[]).push(arguments)};U[ab].loadTime=Date.now();U[ab].enabled=true;U[ab].q=U[ab].q||[];U[ab].trackCustomEvent=function(){[].unshift.call(arguments,"trackCustomEvent");U[ab].apply(this,arguments)};X=Z.createElement(V);ac=Z.getElementsByTagName(V)[0];X.onload=function(){m(true)};X.onerror=function(){m(false)};X.async=1;X.src=ad;ac.parentNode.insertBefore(X,ac)}var W={appId:"aws-console",console:true,trackerConstants:{whitelist:false,cookieDomain:"amazon.com",pluginsEnabledByDefault:true,modality:Y}};for(var ae in aa){if(aa.hasOwnProperty(ae)&&!W[ae]){W[ae]=aa[ae]}}if(N===e+"."+y){I=""}else{I="//"+e+d}window.panorama("newTracker","cf",I,W)};n("panoInitLoad",1);if(AWSC.NavFAC){AWSC.NavFAC.loadFeatures();if(AWSC.NavFAC.isFeatureEnabled(u)&&ConsoleNavService&&ConsoleNavService.Model){var F=J("awsc-mezz-region");var Q=ConsoleNavService.Model.currentRegionId||F||z,f=ConsoleNavService.Model.currentService.id,O=R,i=document.getElementById("awsc-panorama-bundle").getAttribute("data-url");try{var l=window.localStorage.getItem(S+Q);var v=l.split(";");E=v[0];var o=parseInt(v[1],10);if(o&&Date.now()-o<K*3){if(E===T){I="";N=Q+"."+y}else{I="//"+Q+d;N=g}}else{if(o&&Date.now()-o>K*3){localStorage.removeItem(S+Q);E=L;N=g}}}catch(P){E=undefined;N=g}C(Q,f,O,i,N)}else{if(!AWSC.NavFAC.isFeatureEnabled(u)){n("panoFacDisabled",1)}else{n("panoCNSModelMissing",1)}m(false)}}else{n("panoFacUnavailable",1);m(false)}})();